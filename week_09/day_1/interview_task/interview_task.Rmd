---
title: "R Notebook"
output: html_notebook
---

```{r}
library(tidyverse)
library(janitor)
```

```{r}
scotland_level <- read_csv("data/opendata_inc9519_scotland.csv")
by_region <- read_csv("data/opendata_inc9519_region.csv")
by_health_board <- read_csv("data/opendata_inc9519_hb.csv")
label_data <- read_csv("data/geography_codes_and_labels_hb2014_01042019.csv")



```


In order to help inform the planning for provision of cancer treatment services in NHS Borders, we would like to gain better understanding of the incidence of cancer in NHS Borders.

To begin to answer / explore this 
 - I assumed that the data was new, i.e. that this would only include new diagnoses / 
 stats from this year
 - This data goes back to 1995 

Children are my interest, so that will lead my focus.


```{r}
by_health_board %>%
  ggplot(aes(x = Year, y = IncidencesAllAges)) +
  geom_col()

```

```{r}
by_region %>%
  ggplot(aes(x = IncidencesAgeUnder5, y = CancerSite)) +
  geom_col()

```
This shows that children (under 5) are most commonly diagnosed with leukemia, i.e. there is a prevalent type.

So, my questions, to myself, are:

- What are the prevalent types (if any), in the 4 age groups of children?
- What is the incidence of cancer among demographics in the groups?
- Has a prevalent type changed over the last 30 or so years?
- Are there regional variations?
- What can be recommended / generalised? 
- Note; reading about cancer in children and young people in Scotland:
https://publichealthscotland.scot/publications/children-and-young-people-with-
cancer-in-scotland/children-and-young-people-with-cancer-in-scotland-21-september-2021/

## 1 - What are the prevalent types in the 4 age groups of children?
```{r}
by_region <- clean_names(by_region)

# under 5
by_region %>%
  select(1:7) %>%
  group_by(cancer_site) %>%
  mutate(sum_type = sum(incidences_age_under5)) %>%
  filter(sum_type != 0, cancer_site != "All cancer types") %>%
  ggplot(aes(x = sum_type, y = cancer_site)) +
  geom_bar(stat = "identity")

# age 5 to 9 
by_region %>%
  select(1:6, 8) %>%
  group_by(cancer_site) %>%
  mutate(sum_type = sum(incidences_age5to9)) %>%
  filter(sum_type != 0, cancer_site != "All cancer types") %>%
  ggplot(aes(x = sum_type, y = cancer_site)) +
  geom_bar(stat = "identity")

# age 10 to 14
by_region %>%
  select(1:6, 9) %>%
  group_by(cancer_site) %>%
  mutate(sum_type = sum(incidences_age10to14)) %>%
  filter(sum_type != 0, cancer_site != "All cancer types") %>%
  ggplot(aes(x = sum_type, y = cancer_site)) +
  geom_bar(stat = "identity")

# age 15 to 19
by_region %>%
  select(1:6, 10) %>%
  group_by(cancer_site) %>%
  mutate(sum_type = sum(incidences_age15to19)) %>%
  filter(sum_type != 0, cancer_site != "All cancer types") %>%
  ggplot(aes(x = sum_type, y = cancer_site)) +
  geom_bar(stat = "identity")

```

```{r}


```

